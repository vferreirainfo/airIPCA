/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details

	Build based on IBM Dojo 1.9.3-fd52c96

	This file contains Dojo code and also custom JavaScript for Lufthansa.
*///>>built
require({cache:{"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(a,d,f){return a("dijit.form.RadioButton",[d,f],{baseClass:"dijitRadio"})})},"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),function(a,d,f,b,c,e,h,g,k){b("dijit-legacy-requires")&&e(0,function(){a(["dijit/form/RadioButton"])});
return d("dijit.form.CheckBox",[h,g],{templateString:k,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0);this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&c("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");
this.inherited(arguments)},_onBlur:function(){this.id&&c("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(a,d,f,b){return a("dijit.form.ToggleButton",[f,b],{baseClass:"dijitToggleButton",setChecked:function(a){d.deprecated("setChecked("+a+") is deprecated. Use set('checked',"+a+") instead.","","2.0");this.set("checked",a)}})})},
"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(a,d){return a("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(a){var b=this.checked;this._set("checked",!b);var c=this.inherited(arguments);this.set("checked",c?this.checked:b);return c},_setCheckedAttr:function(a,b){this._set("checked",a);var c=this.focusNode||this.domNode;this._created&&d.get(c,"checked")!=!!a&&d.set(c,"checked",!!a);c.setAttribute(this._aria_attr,
String(a));this._handleOnChange(a,b)},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.checked&&a.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(a,d){return a("dijit.form._CheckBoxMixin",null,{type:"checkbox",
value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(a){this._set("readOnly",a);d.set(this.focusNode,"readOnly",a)},_setLabelAttr:void 0,_getSubmitValue:function(a){return null==a||""===a?"on":a},_setValueAttr:function(a){a=this._getSubmitValue(a);this._set("value",a);d.set(this.focusNode,"value",a)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));d.set(this.focusNode,"value",this.value)},_onClick:function(a){return this.readOnly?
(a.stopPropagation(),a.preventDefault(),!1):this.inherited(arguments)}})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query ../registry".split(" "),function(a,d,f,b,c,e){return d("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var a=[];c("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(b.hitch(this,function(b){b.name==this.name&&b.form==this.focusNode.form&&(b=e.getEnclosingWidget(b))&&
a.push(b)}));return a},_setCheckedAttr:function(c){this.inherited(arguments);this._created&&c&&a.forEach(this._getRelatedWidgets(),b.hitch(this,function(a){a!=this&&a.checked&&a.set("checked",!1)}))},_getSubmitValue:function(a){return null==a?"on":a},_onClick:function(c){return this.checked||this.disabled?(c.stopPropagation(),c.preventDefault(),!1):this.readOnly?(c.stopPropagation(),c.preventDefault(),a.forEach(this._getRelatedWidgets(),b.hitch(this,function(a){f.set(this.focusNode||this.domNode,
"checked",a.checked)})),!1):this.inherited(arguments)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(a,d,f){return a("dijit.form.DateTextBox",f,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:d,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(a,d,f,b,c,e,h,g,k,p,m,n,q,t,s,r){var l=b("dijit.Calendar",[n,q,t],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){h.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new l._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:k.hitch(this,
"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(p(this.domNode,"keydown",k.hitch(this,"_onKeyDown")),p(this.dateRowsNode,"mouseover",k.hitch(this,"_onDayMouseOver")),p(this.dateRowsNode,"mouseout",k.hitch(this,"_onDayMouseOut")),p(this.dateRowsNode,"mousedown",k.hitch(this,"_onDayMouseDown")),p(this.dateRowsNode,"mouseup",k.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);
b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){(a=e.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!e.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode)&&(e.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},_onDayMouseOut:function(a){!this._currentNode||a.relatedTarget&&
a.relatedTarget.parentNode==this._currentNode||(a="dijitCalendarHoveredDate",e.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),e.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&!e.contains(a,"dijitCalendarDisabledDate")&&(e.add(a,"dijitCalendarActiveDate"),this._currentNode=a)},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&e.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,c,e=this.currentFocus;switch(a.keyCode){case g.RIGHT_ARROW:b=1;case g.LEFT_ARROW:c="day";this.isLeftToRight()||(b*=-1);break;case g.DOWN_ARROW:b=1;case g.UP_ARROW:c="week";break;case g.PAGE_DOWN:b=1;case g.PAGE_UP:c=a.ctrlKey||a.altKey?"year":"month";break;case g.END:e=this.dateModule.add(e,"month",1),c="day";case g.HOME:e=new this.dateClassObj(e);e.setDate(1);break;default:return!0}c&&(e=this.dateModule.add(e,c,b));this._setCurrentFocusAttr(e);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});l._MonthDropDownButton=b("dijit.Calendar._MonthDropDownButton",r,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new l._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==m("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});l._MonthDropDown=b("dijit.Calendar._MonthDropDown",[q,s],{months:[],templateString:"\x3cdiv class\x3d'dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event\x3d'onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'\x3e\x3c/div\x3e",_setMonthsAttr:function(b){this.domNode.innerHTML=
a.map(b,function(a,b){return a?"\x3cdiv class\x3d'dijitCalendarMonthLabel' month\x3d'"+b+"'\x3e"+a+"\x3c/div\x3e":""}).join("")},_onClick:function(a){this.onChange(c.get(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){e.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return l})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(a,d,f,b,c,e,h,g,k,p,m,n,q,t,s){var r=d("dijit.CalendarLite",[q,t],{templateString:s,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);b.setHours(0,
0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=e.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),
a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);var c=b.getDay(),e=this.dateModule.getDaysInMonth(b),d=this.dateModule.getDaysInMonth(this.dateModule.add(b,"month",-1)),h=new this.dateClassObj,k=f.getFirstDayOfWeek(this.lang);k>c&&(k-=7);if(!this.summary){var g=this.dateLocaleModule.getNames("months","wide","standAlone",
this.lang,b);this.gridNode.setAttribute("summary",g[b.getMonth()])}this._date2cell={};a.forEach(this.dateCells,function(a,g){var p=g+k,f=new this.dateClassObj(b),m="dijitCalendar",n=0;p<c?(p=d-c+p+1,n=-1,m+="Previous"):p>=c+e?(p=p-c-e+1,n=1,m+="Next"):(p=p-c+1,m+="Current");n&&(f=this.dateModule.add(f,"month",n));f.setDate(p);this.dateModule.compare(f,h,"date")||(m="dijitCalendarCurrentDate "+m);this.isDisabledDate(f,this.lang)?(m="dijitCalendarDisabledDate "+m,a.setAttribute("aria-disabled","true")):
(m="dijitCalendarEnabledDate "+m,a.removeAttribute("aria-disabled"),a.setAttribute("aria-selected","false"));(n=this.getClassForDate(f,this.lang))&&(m=n+" "+m);a.className=m+"Month dijitCalendarDateTemplate";m=f.valueOf();this._date2cell[m]=a;a.dijitDateValue=m;this._setText(this.dateLabels[g],f.getDateLocalized?f.getDateLocalized(this.lang):f.getDate())},this)},_populateControls:function(){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);this.monthWidget.set("month",b);var c=b.getFullYear()-
1,e=new this.dateClassObj;a.forEach(["previous","current","next"],function(a){e.setFullYear(c++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(e,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?k.getObject(a.datePackage,!1):b;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?k.getObject(a.datePackage+".locale",!1):c},_createMonthWidget:function(){return r._MonthWidget({id:this.id+
"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=f.getFirstDayOfWeek(this.lang);this.dayCellsHtml=n.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[c++%7]});a=n.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);
h.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=k.hitch(this,function(a,b,c){return p(this[a],"click",k.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode",
"year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,e=this._getNodeByDate(c);a=this._patchDate(a);this._set("currentFocus",a);this._date2cell&&0==this.dateModule.difference(c,a,"month")||(this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]));c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&c.focus();e&&e!=c&&(m("webkit")?e.setAttribute("tabIndex","-1"):e.removeAttribute("tabIndex"))},
focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!g.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(b){function c(a,b){g.toggle(b,"dijitCalendarSelectedDate",a);b.setAttribute("aria-selected",a?"true":
"false")}a.forEach(this._selectedCells||[],k.partial(c,!1));this._selectedCells=a.filter(a.map(b,this._getNodeByDate,this),function(a){return a});a.forEach(this._selectedCells,k.partial(c,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});r._MonthWidget=d("dijit.CalendarLite._MonthWidget",q,{_setMonthAttr:function(b){var c=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b),e=6==m("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+a.map(c,function(a){return"\x3cdiv\x3e"+
a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=e+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+c[b.getMonth()]+"\x3c/div\x3e"}});return r})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(a,d,f,b,c,e,h,g){new Date("X");return b("dijit.form._DateTimeTextBox",[e,h],{templateString:g,
hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:d.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(b,c){var e=this._isInvalidDate(b),d=this._isInvalidDate(c);return e?d?0:-1:d?1:a.compare(b,c,this._selector)},autoWidth:!0,format:function(a,b){return a?this.dateLocaleModule.format(a,b):""},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:void 0)},serialize:function(a,
b){a.toGregorian&&(a=a.toGregorian());return f.toISOString(a,b)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){b=b||{};this.dateModule=b.datePackage?c.getObject(b.datePackage,!1):a;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?c.getObject(b.datePackage+".locale",!1):d;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);
this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(a){a.selector=this._selector;a.fullYear=!0;var b=f.fromISOString;"string"==typeof a.min&&(a.min=b(a.min));"string"==typeof a.max&&(a.max=b(a.max));this.inherited(arguments)},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a,b,c){void 0!==a&&("string"==
typeof a&&(a=f.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a)));this.inherited(arguments);this.value instanceof Date&&(this.filterString="");this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,b){var c=this._get("value");"value"==a&&c instanceof Date&&0==this.compare(b,c)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj);this._set("dropDownDefaultValue",
a)},openDropDown:function(a){this.dropDown&&this.dropDown.destroy();var b=c.isString(this.popupClass)?c.getObject(this.popupClass,!1):this.popupClass,e=this,d=this.get("value");this.dropDown=new b({onChange:function(a){e.set("value",a,!0)},id:this.id+"_popup",dir:e.dir,lang:e.lang,value:d,textDir:e.textDir,currentFocus:this._isInvalidDate(d)?this.dropDownDefaultValue:d,constraints:e.constraints,filterString:e.filterString,datePackage:e.datePackage,isDisabledDate:function(a){return!e.rangeCheck(a,
e.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,b){this._setValueAttr(this.parse(a,this.constraints),b,a)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(a,d,f){return a("dijit.form.RangeBoundTextBox",f,{rangeMessage:"",rangeCheck:function(a,c){return("min"in c?0<=this.compare(a,c.min):!0)&&("max"in c?0>=this.compare(a,c.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),
this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.get("value");if(null==a)return!1;var c=!1;"min"in this.constraints&&(c=this.constraints.min,c=0>this.compare(a,"number"==typeof c&&0<=c&&0!=a?0:c));!c&&"max"in this.constraints&&(c=this.constraints.max,c=0<this.compare(a,"number"!=typeof c||0<c?c:0));return c},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&
!this.required||this.isInRange(a))},getErrorMessage:function(a){var c=this.get("value");return null==c||""===c||"number"==typeof c&&isNaN(c)||this.isInRange(a)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=d.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct",
"./ValidationTextBox"],function(a,d,f,b){return a("dijit.form.MappedTextBox",b,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.get("value"));return null!=a?"string"==typeof a?a:this.serialize(a,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);
this.valueNode=f.place("\x3cinput type\x3d'hidden'"+(this.name&&!d("msapp")?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(a,d,f,b){return a("dijit.form.SimpleTextarea",b,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);f("ie")&&this.cols&&d.add(this.textbox,"dijitTextAreaCols")},filter:function(a){a&&(a=a.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(a){if(this.maxLength){var b=parseInt(this.maxLength),d=this.textbox.value.replace(/\r/g,""),b=d.length-b;if(0<b){var g=this.textbox;if(g.selectionStart){var k=g.selectionStart,
p=0;f("opera")&&(p=(this.textbox.value.substring(0,k).match(/\r/g)||[]).length);this.textbox.value=d.substring(0,k-b-p)+d.substring(k-p);g.setSelectionRange(k-b,k-b)}else this.ownerDocument.selection&&(g.focus(),d=this.ownerDocument.selection.createRange(),d.moveStart("character",-b),d.text="",d.select())}}this.inherited(arguments)}})})},"lh/lh_formBuilder":function(){define(["dojo","dijit","dojox","dojo/require!lh/util/logger,dojo/window,lh/app/hc_2011/flightDetailsModule,lh/app/hc_2011/assistanceTypeModule,lh/app/hc_2011/disabilityTypeModule,lh/app/hc_2011/companionReasonsModule"],
function(a,d,f){a.provide("lh.lh_formBuilder");a.require("lh.util.logger");a.require("dojo.window");a.require("lh.app.hc_2011.flightDetailsModule");a.require("lh.app.hc_2011.assistanceTypeModule");a.require("lh.app.hc_2011.disabilityTypeModule");a.require("lh.app.hc_2011.companionReasonsModule");a.declare("lh.lh_formBuilder",[lh.util.logger,lh.app.hc_2011.flightDetailsModule,lh.app.hc_2011.assistanceTypeModule,lh.app.hc_2011.disabilityTypeModule,lh.app.hc_2011.companionReasonsModule],{debug:!1,formID:null,
submit_btnId:"fb_submit_btn_link",isLoggedIn:!1,enableIframe:!1,prefilledData:{},title:[],country:[],regions:{},airline:[],countryCode:[],monthNames:[],dayNames:[],categories:null,labelName:{},errorMessage:{},origin:function(){},destination:function(){},calender:null,calender_fd:null,inputValues:{},refundReason:null,passengerData:{},iframeBaseUrl:null,attachmentsEnabled:!0,hiddenClass:"x-hidden",modFormWrapperID:"fb_mod_dynamicWrapper",modPersonalDataID:"fb_mod_personal",modCustomerWrpID:"fb_mod_cstm_wrp",
modAddressID:"fb_mod_address",modPhoneID:"fb_mod_phone",modPirID:"fb_mod_pir",modFlightID:"fb_mod_flight",modBankID:"fb_mod_bank",modRefundID:"fb_mod_refund",modTechnicalID:"fb_mod_technial",modTicketID:"fb_mod_ticket",modAttachmentID:"fb_mod_attachment",modFeedbackID:"fb_mod_feedbackID",modCommentID:"fb_mod_comment",modSelectorID:"#fb_mod_catSelector .firstColumn",modQgoID:"#fb_mod_catSelector .secondColumn p",modCustomer2:"fb_mod_customer2",modCustomer3:"fb_mod_customer3",constructor:function(b){var c=
this;c.debugEnter("constructor");a.mixin(c,b);c.$FORM_WRAPPER=a.byId(c.modFormWrapperID);c.$PERSONAL_DATA=a.byId(c.modPersonalDataID);c.$CUSTOMER=a.byId(c.modCustomerWrpID);c.$ADDRESS_DATA=a.byId(c.modAddressID);c.$PHONE=a.byId(c.modPhoneID);c.$PIR=a.byId(c.modPirID);c.$FLIGH_DATA=a.byId(c.modFlightID);c.$BANK_INFO=a.byId(c.modBankID);c.$REFUND=a.byId(c.modRefundID);c.$TECHNICAL_INFO=a.byId(c.modTechnicalID);c.$TICKET_INFO=a.byId(c.modTicketID);c.$ATTACHMENT=a.byId(c.modAttachmentID);c.$FEEDBACKID=
a.byId(c.modFeedbackID);c.$COMMENT=a.byId(c.modCommentID);c.$SELECTOR=a.query(c.modSelectorID)[0];c.$QGO=a.query(c.modQgoID)[0];c.$CUSTOMER2=a.byId(c.modCustomer2);c.$CUSTOMER3=a.byId(c.modCustomer3);c.submitBtn=a.byId(c.submit_btnId);var e=0,h=1;c.$MODULES=[c.$CUSTOMER,c.$ADDRESS_DATA,c.$PHONE,c.$FLIGHT_DETAILS,c.$ASSISTANCE,c.$DISABILITY,c.$COMPANION,c.$FLIGH_DATA,c.$BANK_INFO,c.$REFUND,c.$TECHNICAL_INFO,c.$TICKET_INFO,c.$ATTACHMENT,c.$FEEDBACKID,c.$COMMENT,c.$PIR,c.$CUSTOMER2,c.$CUSTOMER3];a.some(c.$MODULES,
function(a){return null===a||void 0===a})&&c.debugWarn("One fieldID is missing or incorrect");c.createSelector=function(){4>=e?(e++,c.debugMsg("Selector created "+e)):c.debugWarn("Only four Selectors are allowed")};c.deleteSelector=function(){0<e?(e--,c.debugMsg("Selector deleted "+e)):c.debugWarn("Only four Selectors are allowed")};c.getSelectorCount=function(){return e};c.getCurrentCustomerCount=function(){return h};c.decreaseCustomerCount=function(){1<=h&&(h--,c.debugMsg("Customer decreased "+
h));3!==h&&0<h&&a.style(a.byId("addCustomerLink"),"display","inline-block")};c.increaseCustomerCount=function(){3>=h&&(h++,c.debugMsg("Customer increased "+h));3>h?a.style(a.byId("addCustomerLink"),"display","inline-block"):(a.style(a.byId("addCustomerLink"),"display","none"),c.debugMsg("Customer maximum reached "+h))};c.createPersonalDataModule();var g=d.byId(c.calender)||d.byId(fldFlightDate)||null;g&&(""===g.get("class")&&g.set("class",["fb_protect","datepicker"]),void 0===g.get("name")&&g.set("name",
"FlightDate"),g.inboundFieldNodeHidden.disabled=!0,a.connect(c,"_destroyForm",function(){g.inboundFieldNodeHidden.disabled=!0;g.inboundFieldNodeHidden.value="";g.value=""}));var k=d.byId(c.calender_fd)||d.byId(fldFlightDate2)||null;k&&(""===k.get("class")&&k.set("class",["fb_protect","datepicker"]),void 0===k.get("name")&&k.set("name","FlightDate2"),k.inboundFieldNodeHidden.disabled=!0,c.calHandler=a.connect(c,"_destroyForm",function(){k.inboundFieldNodeHidden.disabled=!0;k.inboundFieldNodeHidden.value=
"";k.value=""}));a.subscribe("select_cat1",function(a){c.initSelectors(a)});a.connect(c,"initModules",function(a){c.isLoggedIn&&c._showOverwriteMsg()});a.connect(c,"_destroyForm",function(a){h=1});c.debugExit();c._init()},showFirstSelector:function(){var b=this;b.debugEnter("showFirstSelector");if(b.categories)return(new lh.widget.form.KeySelect({id:"CAT_SELECT_1",name:"Category_1","class":["fb_protect","cat_select1"],options:b.categories.level1,required:!0,style:{display:"block",width:"auto",fontSize:"14px",
padding:"1px 0px 1px 10px",margin:"10px 0 0 0"},onChange:function(){if(0<b.getSelectorCount())for(b.debugMsg("Count:"+b.getSelectorCount());1<b.getSelectorCount();)if(1!=b.getSelectorCount()){var c=d.byId("CAT_SELECT_"+b.getSelectorCount());b.debugMsg("Killing:"+b.getSelectorCount());c.destroyRecursive();b.deleteSelector()}b.formIsVisible?b._destroyForm():(b.enableIframe&&b.setQGO(!1,""),b.setInfoText(!1,"",b.enableIframe));a.publish("select_cat1",[{value:this.get("value"),level:"1",opt:this.getOptions(this.get("value"))}]);
this.getOptions(this.get("value")).formID&&(a.byId("formTypeInput").value=this.getOptions(this.get("value")).formID)}})).placeAt(b.$SELECTOR).startup(),b.createSelector(),b.debugExit(),!0;b.debugErr("no categories found");a.style(b.$PERSONAL_DATA,"display","none");b.$SELECTOR.innerHTML="ERROR: No Categories found !";b.debugExit();return!1},initSelectors:function(b){var c=this;c.debugEnter("initSelectors");var e=parseInt(b.level)+1;b=b.opt;if(b.hasOwnProperty("level"+e))(new lh.widget.form.KeySelect({id:"CAT_SELECT_"+
e,name:"Category_"+e,"class":["fb_protect","cat_select"+e],options:b["level"+e],required:!0,value:" ",style:{display:"block",width:"auto",fontSize:"14px",padding:"1px 0px 1px 10px",margin:"10px 0 0 0"},onChange:function(){if(c.getSelectorCount()>e)for(;c.getSelectorCount()>e;)c.getSelectorCount()!=e&&(d.byId("CAT_SELECT_"+c.getSelectorCount()).destroyRecursive(),c.deleteSelector());c.formIsVisible?c._destroyForm():(c.enableIframe&&c.setQGO(!1,""),c.setInfoText(!1,"",c.enableIframe));a.publish("select_cat1",
[{value:this.get("value"),level:e,opt:this.getOptions(this.get("value"))}])}})).placeAt(c.$SELECTOR).startup(),c.createSelector();else{if(b.hasOwnProperty("module")){c.debugMsg("But module found, so show form");b.hasOwnProperty("infoText")&&b.infoText&&c.setInfoText(!0,b.infoText,c.enableIframe);c.initModules(b.module,b.target);for(var h="",g=1;g<=c.getSelectorCount();g++)h+=" "+a.trim(d.byId("CAT_SELECT_"+g).get("displayedValue"));c.debugMsg("qGo Parameter: "+h);c.enableIframe&&(c.setQGO(!0,h),c.debugMsg("qGo iFrame enabled"))}else{b.hasOwnProperty("infoText")&&
b.infoText&&(c.setInfoText(!0,b.infoText,c.enableIframe),c.debugMsg("Info Text: "+b.infoText));h="";for(g=1;g<=c.getSelectorCount();g++)h+=" "+a.trim(d.byId("CAT_SELECT_"+g).get("displayedValue"));c.enableIframe&&c.setQGO(!0,h)}b.hasOwnProperty("formID")&&(a.byId("formTypeInput").value=b.formID,c.debugMsg("Form ID: "+b.formID));b.hasOwnProperty("catID")&&(c.debugMsg("Cat ID: "+b.catID),a.byId("categoryId").value=b.catID)}c.debugExit()},_init:function(){this.debugEnter("_init");for(var b={},c=location.search.substring(1).split("\x26"),
e=0;e<c.length;e++){var h=c[e].indexOf("\x3d");if(-1!=h){var g=c[e].substring(0,h),h=c[e].substring(h+1),h=decodeURIComponent(h);b[g]=h}}if("type"in b&&"level1"in b){if("type"in b)for(var k in b)if(b.hasOwnProperty(k))switch(k){case "level1":if(this.showFirstSelector())d.byId("CAT_SELECT_1")._lastValueReported=this.categories.level1[b.level1].value,d.byId("CAT_SELECT_1").set("value",this.categories.level1[b.level1]),this.initSelectors({value:d.byId("CAT_SELECT_1").get("value"),level:"1",opt:d.byId("CAT_SELECT_1").getOptions(d.byId("CAT_SELECT_1").get("value"))}),
d.byId("CAT_SELECT_1").getOptions(d.byId("CAT_SELECT_1").get("value")).formID&&(a.byId("formTypeInput").value=d.byId("CAT_SELECT_1").getOptions(d.byId("CAT_SELECT_1").get("value")).formID);else return this.debugExit(),!1;break;case "level2":d.byId("CAT_SELECT_2")._lastValueReported=this.categories.level1[b.level1].level2[b.level2].value;d.byId("CAT_SELECT_2").set("value",this.categories.level1[b.level1].level2[b.level2]);this.initSelectors({value:d.byId("CAT_SELECT_2").get("value"),level:2,opt:d.byId("CAT_SELECT_2").getOptions(d.byId("CAT_SELECT_2").get("value"))});
break;case "level3":d.byId("CAT_SELECT_3")._lastValueReported=this.categories.level1[b.level1].level2[b.level2].level3[b.level3].value;d.byId("CAT_SELECT_3").set("value",this.categories.level1[b.level1].level2[b.level2].level3[b.level3]);this.initSelectors({value:d.byId("CAT_SELECT_3").get("value"),level:3,opt:d.byId("CAT_SELECT_3").getOptions(d.byId("CAT_SELECT_3").get("value"))});break;case "level4":d.byId("CAT_SELECT_4")._lastValueReported=this.categories.level1[b.level1].level2[b.level2].level3[b.level3].level4[b.level4].value,
d.byId("CAT_SELECT_4").set("value",this.categories.level1[b.level1].level2[b.level2].level3[b.level3].level4[b.level4]),this.initSelectors({value:d.byId("CAT_SELECT_4").get("value"),level:4,opt:d.byId("CAT_SELECT_4").getOptions(d.byId("CAT_SELECT_4").get("value"))})}}else if(this.prefilledData.category1)for(var f in this.prefilledData){if(this.prefilledData.hasOwnProperty(f))switch(f){case "category1":if(this.showFirstSelector())d.byId("CAT_SELECT_1")._lastValueReported=this.categories.level1[this.prefilledData.category1].value,
d.byId("CAT_SELECT_1").set("value",this.categories.level1[this.prefilledData.category1]),this.initSelectors({value:d.byId("CAT_SELECT_1").get("value"),level:"1",opt:d.byId("CAT_SELECT_1").getOptions(d.byId("CAT_SELECT_1").get("value"))}),d.byId("CAT_SELECT_1").getOptions(d.byId("CAT_SELECT_1").get("value")).formID&&(a.byId("formTypeInput").value=d.byId("CAT_SELECT_1").getOptions(d.byId("CAT_SELECT_1").get("value")).formID);else return this.debugExit(),!1;break;case "category2":if(!this.prefilledData.category2)return;
d.byId("CAT_SELECT_2")._lastValueReported=this.categories.level1[this.prefilledData.category1].level2[this.prefilledData.category2].value;d.byId("CAT_SELECT_2").set("value",this.categories.level1[this.prefilledData.category1].level2[this.prefilledData.category2]);this.initSelectors({value:d.byId("CAT_SELECT_2").get("value"),level:2,opt:d.byId("CAT_SELECT_2").getOptions(d.byId("CAT_SELECT_2").get("value"))});break;case "category3":if(!this.prefilledData.category3)return;d.byId("CAT_SELECT_3")._lastValueReported=
this.categories.level1[this.prefilledData.category1].level2[this.prefilledData.category2].level3[this.prefilledData.category3].value;d.byId("CAT_SELECT_3").set("value",this.categories.level1[this.prefilledData.category1].level2[this.prefilledData.category2].level3[this.prefilledData.category3]);this.initSelectors({value:d.byId("CAT_SELECT_3").get("value"),level:3,opt:d.byId("CAT_SELECT_3").getOptions(d.byId("CAT_SELECT_3").get("value"))});break;case "category4":if(!this.prefilledData.category4)return;
d.byId("CAT_SELECT_4")._lastValueReported=this.categories.level1[this.prefilledData.category1].level2[this.prefilledData.category2].level3[this.prefilledData.category3].level4[this.prefilledData.category4].value;d.byId("CAT_SELECT_4").set("value",this.categories.level1[this.prefilledData.category1].level2[this.prefilledData.category2].level3[this.prefilledData.category3].level4[this.prefilledData.category4]);this.initSelectors({value:d.byId("CAT_SELECT_4").get("value"),level:4,opt:d.byId("CAT_SELECT_4").getOptions(d.byId("CAT_SELECT_4").get("value"))})}}else this.showFirstSelector();
this.debugExit()},initModules:function(b,c){this.debugEnter("initModules");var e=b.split("|"),d=c||"";if(a.isArray(e)){a.removeClass(this.$FORM_WRAPPER,"lh_fbBorder");for(var g=0;g<e.length;g++)switch(e[g]){case "A":this.createCommentModule();this.debugMsg("Comment Module created succesfully .....");break;case "B":this.createAddressModule();this.debugMsg("Adress Module created succesfully .....");break;case "C":this.createFlightModule(!1);this.debugMsg("Flight Module created succesfully .....");break;
case "D":this.createFlightModule(!0);this.debugMsg("Flight Module with Seat created succesfully .....");break;case "E":this.createRefundModule();this.debugMsg("refund Module (German) created succesfully .....");break;case "F":this.createPhoneModule(!1);this.debugMsg("Phone Module created succesfully .....");break;case "G":this.createTicketModule();this.debugMsg("Ticket Module created succesfully .....");break;case "H":this.createFeedbackIdModule();this.debugMsg("Feedback Module created succesfully .....");
break;case "I":this.attachmentsEnabled&&(this.createAttachmentModule(),this.debugMsg("Attachment Module created succesfully ....."));break;case "J":this.createTechnicalModule();this.debugMsg("Technical Module created succesfully .....");break;case "L":this.createPIRModule();this.debugMsg("PIR Module created succesfully .....");break;case "M":this.createBankAccountModule();this.debugMsg("Bank Module (German) created succesfully .....");break;case "N":this._initFlightDetailsModule(),this._initAssistanceTypeModule(),
this._initDisabilityTypeModule(),this._initCompanionReasonsModule(),this.addResetButton(),this.debugMsg("assistance service created succesfully .....")}this.debugMsg("Form created succesfully .....Target: "+d);this.formID.connectChildren();this._createSubmitbutton();a.hasClass(this.$FORM_WRAPPER,this.hiddenClass)&&(a.removeClass(this.$FORM_WRAPPER,this.hiddenClass),this.formIsVisible=!0)}this.debugExit()},_addCustomer:function(b){var c=this;b.preventDefault();c.increaseCustomerCount();var e=parseInt(c.getCurrentCustomerCount());
b=a.byId("fb_mod_customer"+e);a.removeClass(b,c.hiddenClass);c.passengerData["passenger"+e]=[];b=a.byId("passenger"+e);b=a.connect(b,"onclick",this,c._deleteCustomer);c.passengerData["passenger"+e].push(b);d.byId("adressCheckbox"+e)||((new d.form.CheckBox({id:"adressCheckbox"+e,name:"adressCheckbox"+e,"class":"adressCheckbox",value:"",checked:!1,onChange:function(){c._fillInCustomerData(this.checked,e)}})).placeAt(a.byId("adressChkBox"+e),"first").startup(),c.passengerData["passenger"+e].push(d.byId("adressCheckbox"+
e)));d.byId("title_select_"+e)||((new lh.widget.form.KeySelect({name:"Salutation_"+e,"class":"title",id:"title_select_"+e,required:!0,value:c.prefilledData["title"+e]||" ",options:c.title})).placeAt(a.byId("title"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("title_select_"+e)));d.byId("firstname_"+e)||((new d.form.ValidationTextBox({name:"FirstName_"+e,id:"firstname_"+e,"class":"firstname",required:!0,properCase:!0,value:c.prefilledData["firstName"+e]||null,maxLength:50,missingMessage:"",
invalidMessage:c.errorMessage["firstname"+e]||"Please enter the first name"})).placeAt(a.byId("firstname"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("firstname_"+e)));d.byId("lastname_"+e)||((new d.form.ValidationTextBox({name:"LastName_"+e,"class":"lastname",id:"lastname_"+e,required:!0,properCase:!0,maxLength:50,value:c.prefilledData["lastName"+e]||null,missingMessage:"",invalidMessage:c.errorMessage["lastname"+e]||"Please enter the last name"})).placeAt(a.byId("lastname"+e)).startup(),
c.passengerData["passenger"+e].push(d.byId("lastname_"+e)));d.byId("email_"+e)||((new d.form.ValidationTextBox({name:"Email_"+e,id:"email_"+e,"class":"email",required:!0,missingMessage:"",regExp:f.validate.regexp.emailAddress(),invalidMessage:c.errorMessage.email||"Please enter valid email",value:c.prefilledData["email"+e]||null,onBlur:function(){var a=d.byId("r_email_"+e);a&&a.validate()}})).placeAt(a.byId("email"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("email_"+e)));d.byId("r_email_"+
e)||((new d.form.ValidationTextBox({name:"rEmail_"+e,id:"r_email"+e,"class":"email",required:!0,constraints:{firstMail:"email_"+e,isTyping:!1},validator:c._checkDoubleEmail,onFocus:function(){this.constraints.isTyping=!0;this.promptMessage=null},onBlur:function(){this.promptMessage=null;this.constraints.isTyping=!1;this.validate()},onKeyPress:function(a){this.promptMessage=null;c._avoidCopyandPaste(a)},value:c.prefilledData.email||null,missingMessage:"",promptMessage:"",invalidMessage:c.errorMessage.emailMatch||
"Email adress do not match",tooltipPosition:"right"})).placeAt(a.byId("r_email"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("r_email_"+e)),a.connect(a.byId("r_email"+e),"oncontextmenu",function(a){c._avoidCopyandPaste(a)}));d.byId("mam_number_"+e)||((new d.form.ValidationTextBox({name:"MamNumber_"+e,id:"mam_number_"+e,"class":"mam_number",value:c.prefilledData["mamNumber"+e]||null,validator:c._checkMam,onFocus:function(){this.constraints=!0},onBlur:function(){this.constraints=!1;this.validate()},
missingMessage:"",invalidMessage:c.errorMessage.mam||"Please enter valid Miles and more number"})).placeAt(a.byId("mam_number"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("mam_number_"+e)));d.byId("street_name_"+e)||((new d.form.TextBox({id:"street_name_"+e,name:"Street_"+e,"class":"street_name",value:c.prefilledData["streetName"+e]||null})).placeAt(a.byId("street_name"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("street_name_"+e)));d.byId("street_no_"+e)||((new d.form.TextBox({id:"street_no_"+
e,name:"StreetNumber_"+e,"class":"street_no",value:c.prefilledData["streetNumber"+e]||null})).placeAt(a.byId("street_no"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("street_no_"+e)));d.byId("zip_"+e)||((new d.form.TextBox({id:"zip_"+e,name:"ZipCode_"+e,"class":"zip",value:c.prefilledData["zip"+e]||null})).placeAt(a.byId("zip"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("zip_"+e)));d.byId("city_"+e)||((new d.form.TextBox({id:"city_"+e,name:"City_"+e,"class":"city",value:c.prefilledData["city"+
e]||null})).placeAt(a.byId("city"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("city_"+e)));d.byId("adress_details_"+e)||((new d.form.TextBox({id:"adress_details_"+e,name:"AddressDetails_"+e,value:c.prefilledData["addressDetails"+e]||null,"class":"address_details"})).placeAt(a.byId("address_details"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("adress_details_"+e)));d.byId("country_select_"+e)||((new lh.widget.form.KeySelect({id:"country_select_"+e,name:"Country_"+e,"class":"country",
value:" ",maxHeight:"200",value:c.prefilledData["country"+e]||" ",options:c.country,onChange:function(){c._initState(this.get("value"),e)}})).placeAt(a.byId("country"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("country_select_"+e)));d.byId("phone_country_select"+e)||((new lh.widget.form.KeySelect({id:"phone_country_select"+e,name:"PhoneCountry_"+e,"class":"phone_country",maxHeight:"200",value:c.prefilledData["phoneCountryCode"+e]||null,options:c.countryCode})).placeAt(a.byId("phone_country"+
e)).startup(),c.passengerData["passenger"+e].push(d.byId("phone_country_select"+e)));d.byId("phone_area_"+e)||((new d.form.ValidationTextBox({id:"phone_area_"+e,name:"PhoneArea_"+e,"class":"phone_area",value:c.prefilledData["phoneAreaCode"+e]||null,regExp:"[0-9]+",maxLength:10})).placeAt(a.byId("phone_area"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("phone_area_"+e)));d.byId("phone_number_"+e)||((new d.form.ValidationTextBox({id:"phone_number_"+e,name:"PhoneNumber_"+e,"class":"phone_number",
value:c.prefilledData["phoneNumber"+e]||null,regExp:"[0-9]+",maxLength:10})).placeAt(a.byId("phone_number"+e)).startup(),c.passengerData["passenger"+e].push(d.byId("phone_number_"+e)))},_deleteCustomer:function(b){if(b){b.preventDefault();b=b.currentTarget.id;var c=parseInt(b.charAt(b.length-1)),e=null,d;for(d in this.passengerData[b])c<this.getCurrentCustomerCount()?(e="passenger3","0"===d?a.disconnect(this.passengerData[e][d]):this.passengerData[e][d]&&this.passengerData[b][d]&&(this.passengerData[b][d].set("value",
this.passengerData[e][d].get("value")),this.passengerData[e][d].destroy())):(e=b,"0"===d?a.disconnect(this.passengerData[b][d]):this.passengerData[b][d].destroy());delete this.passengerData[e];a.addClass(a.byId(e).parentNode.parentNode.parentNode,this.hiddenClass);this.decreaseCustomerCount()}},createPersonalDataModule:function(){var b=this;b.debugEnter("createPersonalDataModule");(new lh.widget.form.KeySelect({name:"Salutation_1","class":["fb_protect","title"],required:!0,value:b.prefilledData.title||
" ",invalidMessage:b.errorMessage.title||"Please select a title",options:b.title})).placeAt(a.byId("title")).startup();(new d.form.ValidationTextBox({name:"FirstName_1",id:"firstname","class":["fb_protect","firstname"],required:!0,properCase:!0,value:b.prefilledData.firstName||null,maxLength:50,missingMessage:"",invalidMessage:b.errorMessage.firstName||"Please enter the first name",tooltipPosition:"top"})).placeAt(a.byId("firstname")).startup();(new d.form.ValidationTextBox({name:"LastName_1",id:"lastname",
"class":["fb_protect","lastname"],required:!0,properCase:!0,value:b.prefilledData.lastName||null,maxLength:50,missingMessage:"",invalidMessage:b.errorMessage.lastName||"Please enter the last name",tooltipPosition:"top"})).placeAt(a.byId("lastname")).startup();(new d.form.ValidationTextBox({name:"Email_1",id:"email","class":["fb_protect","email"],required:!0,value:b.prefilledData.email||null,missingMessage:"",regExp:f.validate.regexp.emailAddress(),invalidMessage:b.errorMessage.email||"Please enter valid email",
onBlur:function(){var a=d.byId("r_email");a&&a.validate()},tooltipPosition:"top"})).placeAt(a.byId("email")).startup();(new d.form.ValidationTextBox({name:"rEmail_1",id:"r_email","class":["fb_protect","email"],required:!0,constraints:{firstMail:"email",isTyping:!1},validator:b._checkDoubleEmail,onFocus:function(){this.constraints.isTyping=!0;this.promptMessage=null},onBlur:function(){this.promptMessage=null;this.constraints.isTyping=!1;this.validate()},onKeyPress:function(a){this.promptMessage=null;
b._avoidCopyandPaste(a)},value:b.prefilledData.email||null,missingMessage:"",promptMessage:"",invalidMessage:b.errorMessage.emailMatch||"Email adress do not match",tooltipPosition:"right"})).placeAt(a.byId("r_email")).startup();a.connect(a.byId("r_email"),"oncontextmenu",function(a){b._avoidCopyandPaste(a)});(new d.form.ValidationTextBox({name:"MamNumber_1",id:"mam_number",value:b.prefilledData.mamNumber||null,"class":["fb_protect","mam_number"],validator:b._checkMam,onFocus:function(){this.constraints=
!0},onBlur:function(){this.constraints=!1;this.validate()},missingMessage:"",invalidMessage:b.errorMessage.mam||"Please enter valid Miles and more number",maxLength:15})).placeAt(a.byId("mam_number")).startup();b.debugExit()},_checkMam:function(a,c){return c?!0:a?null===a.match(/^[0-9]+$/)?!1:lh.validation.isValidMaMNumber(a)?!0:!1:!0},_checkDoubleEmail:function(a,c){if(c.isTyping)return!0;var e=!1;if(c&&c.firstMail){var h=d.byId(c.firstMail);h&&(e=a==h.value)}return e},_avoidCopyandPaste:function(b){b.charOrCode?
(b.ctrlKey||b.metaKey)&&"v"==b.charOrCode&&(a.stopEvent(b),b=d.byId(b.target.id))&&(b.promptMessage=this.errorMessage.copyPaste||"No Copy and Paste Allowed"):a.mouseButtons.isRight(b)&&3==b.which&&a.stopEvent(b)},createAddressModule:function(){var b=this;b.debugEnter("createAddressModule");(new d.form.ValidationTextBox({name:"Street_1",id:"street_name","class":"street_name",required:!0,properCase:!0,value:b.prefilledData.streetName||null,maxLength:100,missingMessage:"",invalidMessage:b.errorMessage.streetName||
"Please enter the street name"})).placeAt(a.byId("street_name")).startup();(new d.form.ValidationTextBox({name:"StreetNumber_1",id:"street_no","class":"street_no",required:!0,properCase:!0,value:b.prefilledData.streetNumber||null,maxLength:20,missingMessage:"",invalidMessage:b.errorMessage.streetNumber||"Please enter the street number"})).placeAt(a.byId("street_no")).startup();(new d.form.ValidationTextBox({name:"ZipCode_1",id:"zip","class":"zip",required:!0,value:b.prefilledData.zip||null,maxLength:20,
missingMessage:"",invalidMessage:b.errorMessage.zip||"Please enter the zip"})).placeAt(a.byId("zip")).startup();(new d.form.ValidationTextBox({name:"City_1",id:"city","class":"city",value:b.prefilledData.city||null,required:!0,properCase:!0,missingMessage:"",invalidMessage:b.errorMessage.city||"Please enter the city"})).placeAt(a.byId("city")).startup();(new d.form.TextBox({name:"AddressDetails_1",id:"adress_details","class":"address_details",value:b.prefilledData.addressDetails||null,maxLength:50})).placeAt(a.byId("address_details")).startup();
(new lh.widget.form.KeySelect({name:"Country_1",id:"country_select","class":"country",required:!0,maxHeight:"200",value:b.prefilledData.country||" ",invalidMessage:b.errorMessage.country||"Please select country",options:b.country,onChange:function(){b._initState(this.get("value"),"")}})).placeAt(a.byId("country")).startup();b.prefilledData.country&&b._initState(b.prefilledData.country,"");a.create("a",{href:"#",title:b.labelName.addCustomer,"class":"pi_secondaryButton addIcon",id:"addCustomerLink",
innerHTML:"\x3cspan\x3e"+b.labelName.addCustomer+"\x3c/span\x3e"},a.byId("addCustomer"));a.connect(a.byId("addCustomerLink"),"onclick",b,b._addCustomer);a.connect(b,"_destroyForm",function(){a.destroy(a.byId("addCustomerLink"))});a.removeClass(b.$ADDRESS_DATA,b.hiddenClass);a.removeClass(b.$CUSTOMER,b.hiddenClass);a.addClass(b.$ADDRESS_DATA,"clearfix");b.debugExit()},createPhoneModule:function(){this.debugEnter("createPhoneModule");(new lh.widget.form.KeySelect({name:"PhoneCountry_1",id:"phone_country_select",
"class":"phone_country",required:!0,maxHeight:"200",value:this.prefilledData.phoneCountryCode||" ",invalidMessage:this.errorMessage.phoneCountryCode||"Please select country code",options:this.countryCode})).placeAt(a.byId("phone_country")).startup();(new d.form.ValidationTextBox({name:"PhoneArea_1",id:"phone_area","class":"phone_area",required:!0,value:this.prefilledData.phoneAreaCode||null,maxLength:10,missingMessage:"",regExp:"[0-9]+",invalidMessage:this.errorMessage.phoneAreaCode||"Please enter the phone area code"})).placeAt(a.byId("phone_area")).startup();
(new d.form.ValidationTextBox({name:"PhoneNumber_1",id:"phone_number","class":"phone_number",required:!0,value:this.prefilledData.phoneNumber||null,maxLength:20,missingMessage:"",regExp:"[0-9]+",invalidMessage:this.errorMessage.phoneNumber||"Please enter the phone number"})).placeAt(a.byId("phone_number")).startup();a.removeClass(this.$PHONE,this.hiddenClass);a.addClass(this.$PHONE,"clearfix");a.hasClass(this.$CUSTOMER,this.hiddenClass)&&a.removeClass(this.$CUSTOMER,this.hiddenClass);this.debugExit()},
createFlightModule:function(b){this.debugEnter("createFlightModule");d.byId("FlightDate")&&(d.byId("FlightDate").inboundFieldNodeHidden.disabled=!1);(new d.form.TextBox({name:"FlightNumber","class":"flight_number",value:this.prefilledData.flightNumber||null,maxLength:4})).placeAt(a.byId("flight_number")).startup();(new lh.widget.form.KeySelect({name:"Airline","class":"airline",maxHeight:"200",value:this.prefilledData.airline||null,options:this.airline,onChange:function(){a.attr(a.query("#fb_mod_flight .flight_number_prefix")[0],
"innerHTML",this.get("value"))}})).placeAt(a.byId("airline")).startup();a.byId("f-destinationName0")?d.byId("f-destinationName0")||this.destination():(a.create("input",{type:"text",id:"f-destinationName0",name:"destinationName[0]",autocomplete:"off"},a.query("label[for\x3df-destinationName0]")[0],"after"),this.destination());a.byId("f-originName0")?d.byId("f-originName0")||this.origin():(a.create("input",{type:"text",id:"f-originName0",name:"originName[0]",autocomplete:"off"},a.query("label[for\x3df-originName0]")[0],
"after"),this.origin());b?(b=a.byId("seat_number"),(new d.form.TextBox({name:"SeatNumber","class":"seat_number",value:this.prefilledData.seatNumber||null,maxLength:5})).placeAt(b).startup(),a.style(b.parentNode,"display","block")):(b=a.byId("seat_number"),a.style(b.parentNode,"display","none"));a.removeClass(this.$FLIGH_DATA,this.hiddenClass);a.addClass(this.$FLIGH_DATA,"clearfix");this.debugExit()},createBankAccountModule:function(){this.debugEnter("createBankAccountModule");(new d.form.TextBox({name:"BankReceipient",
"class":"card_holder"})).placeAt(a.byId("card_holder")).startup();(new d.form.TextBox({name:"Iban","class":"iban"})).placeAt(a.byId("iban")).startup();(new d.form.TextBox({name:"BankName","class":"bank_name"})).placeAt(a.byId("bank_name")).startup();(new d.form.TextBox({name:"BIC","class":"bic"})).placeAt(a.byId("bic")).startup();a.removeClass(this.$BANK_INFO,this.hiddenClass);a.addClass(this.$BANK_INFO,"clearfix");this.debugExit()},createRefundModule:function(){var b=this;b.debugEnter("createRefundModule");
b.createBankAccountModule();(new d.form.ValidationTextBox({name:"refundTicketNumber","class":"ticket_no_lh",required:!0,value:b.prefilledData.refundTicketNumber||null,missingMessage:"",invalidMessage:b.errorMessage.ticketNumber||"Please enter valid Ticket Number",regExp:"[0-9]{10}"})).placeAt(a.byId("ticket_no_lh")).startup();(new d.form.TextBox({name:"refundFileKey","class":"refund_file_key",value:b.prefilledData.refundFileKey||null})).placeAt(a.byId("refund_file_key")).startup();(new d.form.CheckBox({id:"refundTicketCheckbox",
name:"refundEntireTicket","class":"refundTicketCheckbox",checked:b.prefilledData.refundFull,onChange:function(){this.checked?a.addClass(a.byId("refund_segment").parentNode.parentNode,b.hiddenClass):a.removeClass(a.byId("refund_segment").parentNode.parentNode,b.hiddenClass)}})).placeAt(a.byId("refundTicketChkbox"),"first").startup();(new d.form.SimpleTextarea({id:"refund_segment",name:"refundSegment","class":"refund_segment",value:b.prefilledData.refundSegments||null,rows:"25",cols:"20"})).placeAt(a.byId("refund_segment")).startup();
d.byId("refundTicketCheckbox").get("value")||a.removeClass(a.byId("refund_segment").parentNode.parentNode,b.hiddenClass);(new lh.widget.form.KeySelect({name:"refundReason","class":"refund_reason",maxHeight:"200",required:!0,value:b.prefilledData.refundReason||null,invalidMessage:b.errorMessage.refundReasonMissing||"Please select a refund reason",options:b.refundReason})).placeAt(a.byId("refund_reason")).startup();a.removeClass(b.$REFUND,b.hiddenClass);a.addClass(b.$REFUND,"clearfix");b.debugExit()},
createTicketModule:function(){var b=this;b.debugEnter("createTicketModule");(new d.form.RadioButton({id:"ticket_radio",value:"ticket","class":"lhj_ticket",name:"BookingFlag",onClick:function(){b._handleTicketSelection(d.byId("ticket_box"))},checked:!0})).placeAt(a.byId("ticket_no")).startup();(new d.form.ValidationTextBox({id:"ticket_box","class":["ticket_no","lhj_ticket"],name:"BookingValue",regExp:"^[0-9]{13}$",missingMessage:"",invalidMessage:b.errorMessage.ticketNumber||"Please enter valid Ticket Number",
value:b.prefilledData.ticketNumber||null,onClick:function(c){a.hitch(b._handleTicketSelection(this));d.byId("ticket_radio").set("checked",!0)}})).placeAt(a.byId("ticket_no")).startup();(new d.form.RadioButton({id:"file_radio",value:"file_key",name:"BookingFlag","class":"lhj_ticket",onClick:function(){b._handleTicketSelection(d.byId("file_key_box"))},checked:!1})).placeAt(a.byId("file_key")).startup();(new d.form.ValidationTextBox({id:"file_key_box",name:"BookingValue",value:b.prefilledData.fileKeyNumber||
null,"class":["file_key","lhj_ticket"],onClick:function(c){a.hitch(b._handleTicketSelection(this))},disabled:!0})).placeAt(a.byId("file_key")).startup();a.removeClass(b.$TICKET_INFO,b.hiddenClass);a.addClass(b.$TICKET_INFO,"clearfix");b.debugExit()},createAttachmentModule:function(){this.debugEnter("createAttachmentModule");a.removeClass(this.$ATTACHMENT,this.hiddenClass);a.addClass(this.$ATTACHMENT,"clearfix");a.addClass(this.$FORM_WRAPPER,"lh_fbBorder");a.addClass(this.$COMMENT,"fb_borderSeperator");
this.debugExit()},createFeedbackIdModule:function(){this.debugEnter("createFeedbackIdModule");(new d.form.TextBox({name:"FeedbackId","class":"feedbackId",value:this.prefilledData.feedbackid||null})).placeAt(a.byId("feedbackId")).startup();a.removeClass(this.$FEEDBACKID,this.hiddenClass);a.addClass(this.$FEEDBACKID,"clearfix");this.debugExit()},createPIRModule:function(){this.debugEnter("createPIRModule");(new d.form.ValidationTextBox({id:"pir",name:"PIR","class":"pir",required:!0,missingMessage:"",
regExp:"[A-z]{3}[A-z]{2}[0-9]{5}",invalidMessage:this.errorMessage.pirNumber||"Please enter a valid  PIR number",value:this.prefilledData.pirNumber||null})).placeAt(a.byId("pir")).startup();a.removeClass(this.$PIR,this.hiddenClass);a.addClass(this.$PIR,"clearfix");this.debugExit()},createCommentModule:function(){var b=this;b.debugEnter("createCommentModule");d.byId("comment")||((new d.form.SimpleTextarea({id:"comment",name:"FeedbackText","class":"comment",value:b.prefilledData.feedbackText||null,
rows:"10",cols:"20",onKeyDown:function(a){b._countChars(this,this.get("maxLength"))},onKeyUp:function(a){b._countChars(this,this.get("maxLength"))},maxLength:6E3})).placeAt(a.byId("comment")).startup(),a.create("div",{"class":b.hiddenClass,id:"fb_comment_char_msg",innerHTML:b.labelName.charsLeft+"\x3cspan\x3e \x3c/span\x3e"},b.$COMMENT),a.connect(b,"_destroyForm",function(){a.destroy("fb_comment_char_msg")}),a.removeClass(b.$COMMENT,b.hiddenClass+" fb_borderSeperator"),a.addClass(b.$COMMENT,"clearfix"));
b.debugExit()},createTechnicalModule:function(){this.debugEnter("createTechnicalModule");(new d.form.TextBox({name:"Browser",value:this.prefilledData.browser||null})).placeAt(a.byId("browser")).startup();(new d.form.TextBox({name:"OpSys",value:this.prefilledData.os||null})).placeAt(a.byId("os")).startup();a.removeClass(this.$TECHNICAL_INFO,this.hiddenClass);a.addClass(this.$TECHNICAL_INFO,"clearfix");this.debugExit()},setQGO:function(b,c){this.debugEnter("setQGO");b?(c=encodeURIComponent(c),a.byId("iInterceptor").src=
this.iframeBaseUrl+c,a.removeClass(this.$QGO,this.hiddenClass)):(a.byId("iInterceptor").src="",a.addClass(this.$QGO,this.hiddenClass));this.debugExit()},setInfoText:function(b,c,e){this.debugEnter("setInfoText");e=e?a.query(".selectorQuestion")[0]:this.$QGO;b?(e.innerHTML=c,a.removeClass(e,this.hiddenClass)):(a.addClass(e,this.hiddenClass),e.innerHTML="");this.debugExit()},_showOverwriteMsg:function(){a.style(a.query("span.overwriteMessage")[0],"display","block")},_countChars:function(b,c){var e=
c-b.get("value").length,d=a.query("#fb_comment_char_msg span")[0];2E3>=e?(d.innerHTML=" "+e,a.removeClass(d.parentNode,this.hiddenClass)):(d.innerHTML="",a.addClass(d.parentNode,this.hiddenClass))},_fillInCustomerData:function(a,c){this.debugEnter("_fillInCustomerData");a?(d.byId("street_name_"+c).set("value",d.byId("street_name").get("value")),d.byId("street_no_"+c).set("value",d.byId("street_no").get("value")),d.byId("zip_"+c).set("value",d.byId("zip").get("value")),d.byId("city_"+c).set("value",
d.byId("city").get("value")),d.byId("country_select_"+c).set("value",d.byId("country_select").get("value")),d.byId("regions_select")&&d.byId("region_select_"+c)&&d.byId("region_select_"+c).set("value",d.byId("regions_select").get("value")),d.byId("adress_details_"+c).set("value",d.byId("adress_details").get("value"))):(d.byId("street_name_"+c).set("value",null),d.byId("street_no_"+c).set("value",null),d.byId("zip_"+c).set("value",null),d.byId("city_"+c).set("value",null),d.byId("country_select_"+
c).set("value",null),d.byId("adress_details_"+c).set("value",null));this.debugExit()},_initState:function(b,c){this.debugEnter("_initState");if(b&&this.regions)for(var e in this.regions){if(b===e){var h=a.byId("regions");e=!0;var g="regions_select",k="regions",f="Region_1";c&&(e=!1,h=a.byId("regions"+c),g="regions_select_"+c,k="regions"+c,f="Regions_"+c);(new lh.widget.form.KeySelect({name:f,id:g,"class":"regions",required:e,maxHeight:"200",value:this.prefilledData[k]||" ",invalidMessage:this.errorMessage.regions||
"Please select region",options:this.regions[b]})).placeAt(h).startup();a.removeClass(h.parentNode,"x-hidden");c&&this.passengerData["passenger"+c].push(d.byId("regions_select_"+c));return!0}c?(g=d.byId("regions_select_"+c),h=a.byId("regions"+c)):(g=d.byId("regions_select"),h=a.byId("regions"));g&&(c&&(k=this.passengerData["passenger"+c].indexOf(g),this.passengerData["passenger"+c].splice(k,1)),g.destroy(),a.addClass(h.parentNode,"x-hidden"))}this.debugExit()},showErrorMessage:function(b,c){this.debugEnter("showErrorMessage");
var e=a.create("li",{"class":"fb_errorMessage",innerHTML:c+'\x3ca href\x3d"#'+b+'" id\x3d"errorLink_'+b+'"\x3e\x3cspan class\x3d"arrow-down"\x3e\x26nbsp; \x3c/span\x3e'+(this.errorMessage.msg||"Go to error area")+"\x3c/a\x3e"},a.query("ul.fb_errorList")[0],"last");a.connect(e,"onclick",function(c){c&&(a.stopEvent(c),a.window.scrollIntoView(b),d.byId(b).focus&&d.byId(b).focus())});this.debugExit()},_handleTicketSelection:function(a){this.debugEnter("_handleTicketSelection");a===d.byId("ticket_box")?
(d.byId("file_key_box").set("disabled",!0),d.byId("file_radio").set("checked",!1),d.byId("ticket_box").set("disabled",!1),d.byId("ticket_radio").set("checked",!0)):a===d.byId("file_key_box")&&(d.byId("ticket_box").set("disabled",!0),d.byId("ticket_radio").set("checked",!1),d.byId("file_key_box").set("disabled",!1),d.byId("file_radio").set("checked",!0));a.focus();this.debugExit()},_createSubmitbutton:function(){var b=this;b.debugEnter("_createSubmitbutton");a.removeClass(b.submitBtn.parentNode,b.hiddenClass);
a.connect(b.submitBtn,"onclick",b,function(c){c&&c.preventDefault();if(b.debug){b.debugEnter("Debugging Form Values");c=b.formID.getValues();for(var e in c)b.debugMsg(e+" -\x3e "+c[e]);b.debugExit()}a.query("ul.fb_errorList")[0].innerHTML="";var d=!0;a.forEach(b.formID.getChildren(),function(a){"invalidMessage"in a&&!a.isValid()&&(b.showErrorMessage(a.id,a.invalidMessage),d=!1);"FlightDate2"===a.id&&""===a.inboundFieldNodeHidden.value&&!1===a.inboundFieldNodeHidden.disabled&&(b.showErrorMessage(a.id,
a.errorText),d=!1)});d?b.formID.submit():(a.removeClass(a.query(".fb_errorField")[0],b.hiddenClass),a.query(".fb_errorField")[0].scrollIntoView())});a.connect(b,"_destroyForm",function(){a.addClass(b.submitBtn.parentNode,b.hiddenClass)});b.debugExit()},_destroyForm:function(){this.debugEnter("_destroyForm");this.enableIframe&&this.setQGO(!1,"");this.setInfoText(!1,"",this.enableIframe);for(var b=this.formID.getChildren(),c=0,e=b.length;c<e;c++)"fb_protect"!==b[c].get("class")[0]&&(this.debugMsg("_destroy children: "+
b[c]),b[c].destroy());for(b=0;b<this.$MODULES.length;b++)this.$MODULES[b]&&(a.addClass(this.$MODULES[b],this.hiddenClass),a.removeClass(this.$MODULES[b],"clearfix"));a.forEach(a.query('[for^\x3d"regions"]'),function(b){b.parentNode&&a.addClass(b.parentNode,"x-hidden")});a.hasClass(this.$FORM_WRAPPER,this.hiddenClass)?(a.removeClass(this.$FORM_WRAPPER,this.hiddenClass),this.formIsVisible=!0):(a.addClass(this.$FORM_WRAPPER,this.hiddenClass),this.formIsVisible=!1);a.query("ul.fb_errorList")[0].innerHTML=
"";a.addClass(a.query(".fb_errorField")[0],this.hiddenClass);this.debugExit()}})})},"lh/app/hc_2011/flightDetailsModule":function(){define(["dojo","dijit","dojox","dojo/require!dijit/form/TimeTextBox,dijit/form/ValidationTextBox,lh/util/logger"],function(a,d,f){a.provide("lh.app.hc_2011.flightDetailsModule");a.require("dijit.form.TimeTextBox");a.require("dijit.form.ValidationTextBox");a.require("lh.util.logger");a.declare("lh.app.hc_2011.flightDetailsModule",lh.util.logger,{debug:!1,flightDetailID:"fb_mod_flightDetails",
flightDate2:"FlightDate2",resetButtonID:"fd_reset",fdFileKeyID:"fd_FileKey",fd_FlightTimeID:"fd_FlightTime",fd_FlightNumberID:"fd_FlightNumber",resetSelectionID:"resetSelection",hiddenClass:"x-hidden",constructor:function(b){this.debugEnter("flightDetailsModule constructor");a.mixin(this,b);this.$FLIGHT_DETAILS=a.byId(this.flightDetailID);this.$FLIGHT_DATE2=d.byId(this.flightDate2);this.resetBtn=a.byId(this.resetButtonID);this.fd_FileKey=a.byId(this.fdFileKeyID);this.fd_FlightTime=a.byId(this.fd_FlightTimeID);
this.fd_FlightNumber=a.byId(this.fd_FlightNumberID);this.$FLIGHT_DETAILS&&this.$FLIGHT_DATE2&&this.resetBtn&&this.fd_FileKey&&this.fd_FlightTime&&this.fd_FlightNumber||(this.debugWarn("Missing or invalid fields"),this.debugWarn("fd_FlightTimeID: "+this.$FLIGHT_DETAILS),this.debugWarn("flightDate2: "+this.$FLIGHT_DATE2),this.debugWarn("resetButtonID: "+this.resetBtn),this.debugWarn("fdFileKeyID: "+this.fd_FileKey),this.debugWarn("fd_FlightTimeID: "+this.fd_FlightTime),this.debugWarn("fd_FlightNumberID: "+
this.fd_FlightNumber));this.debugExit()},_initFlightDetailsModule:function(){this.debugEnter("Method _initFlightDetailsModule");this.fd_FileKey?(new d.form.ValidationTextBox({name:"BookingValue","class":"fd_file_key",required:!0,missingMessage:"",invalidMessage:this.errorMessage.fd_FileKey||"Please enter File Key",value:this.prefilledData.fd_fileKey||null})).placeAt(this.fd_FileKey).startup():this.debugWarn("fdFileKeyID missing or not correct: "+this.fd_FileKey);this.$FLIGHT_DATE2?this.$FLIGHT_DATE2.inboundFieldNodeHidden.disabled=
!1:this.debugWarn("flightDate2 missing or not correct: "+this.$FLIGHT_DATE2);this.fd_FlightTime?(new d.form.ValidationTextBox({name:"FlightTime","class":"fd_flight_time",required:!0,placeHolder:"HH:MM",missingMessage:"",regExp:"([01][0-9]|2[0-3]):[0-5][0-9]",invalidMessage:this.errorMessage.fd_flightTime||"Please enter Flight Time",value:this.prefilledData.fd_flightTime||null})).placeAt(this.fd_FlightTime).startup():this.debugWarn("fd_FlightTimeID missgin or not correct: "+this.fd_FlightTime);this.fd_FlightNumber?
(new d.form.ValidationTextBox({name:"FlightNumber","class":"flight_number",required:!0,value:this.prefilledData.fd_flightNumber||null,missingMessage:"",invalidMessage:this.errorMessage.fd_flightNumber||"Please enter Flight Number",regExp:"[0-9]+",maxLength:4})).placeAt(this.fd_FlightNumber).startup():this.debugWarn("fd_FlightNumberID missing or not correct: "+this.fd_FlightNumber);this.$FLIGHT_DETAILS?(a.removeClass(this.$FLIGHT_DETAILS,this.hiddenClass),a.addClass(this.$FLIGHT_DETAILS,"clearfix")):
this.debugWarn("fd_FlightTimeID missing or not correct: "+this.$FLIGHT_DETAILS);this.debugExit()},addResetButton:function(){var b=this;b.debugEnter("flightDetailsModule: Reset Button");a.create("a",{href:"#",title:b.labelName.reset,"class":"pi_secondaryButton",id:b.resetSelectionID,innerHTML:"\x3cspan\x3e"+b.labelName.reset+"\x3c/span\x3e"},b.resetBtn,"first");var c=a.byId(b.resetSelectionID);a.connect(c,"onclick",b,b._resetInputSelection);b.resetBtn?(a.removeClass(b.resetBtn,b.hiddenClass),b.debugMsg("HiddenCssClass Name: "+
b.hiddenClass),a.connect(b,"_destroyForm",function(){a.destroy(c);a.addClass(b.resetBtn,b.hiddenClass)})):b.debugWarn("resetButtonID missing or not correct: "+b.resetBtn);b.debugExit()},_resetInputSelection:function(b){this.debugEnter("_resetInputSelection");var c;b&&a.stopEvent(b);a.query("#fb_mod_prm input[type\x3dradio]").forEach(function(a){c=d.byId(a.id);c.set("checked",!1)});a.query("#fb_mod_prm input[type\x3dcheckbox]").forEach(function(a){c=d.byId(a.id);c.set("checked",!1)});this.debugExit()}})})},
"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(a,d,f,b,c){return a("dijit.form.TimeTextBox",c,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:b,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(a){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),a.keyCode){case d.ENTER:case d.TAB:case d.ESCAPE:case d.DOWN_ARROW:case d.UP_ARROW:break;default:this.defer(function(){var a=
this.get("displayedValue");this.filterString=a&&!this.parse(a,this.constraints)?a.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()})}}})})},"dijit/_TimePicker":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),function(a,d,f,b,c,e,h,g,k,p,m,n,q,t,s,r){return c("dijit._TimePicker",
[s,r],{baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:b.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(a){g.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},
_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,e){a=[];for(b=0;b<this._maxIncrement;b++)(c=this._createOption(b))&&a.push(c);return a},_showText:function(){var c=b.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=c(this.clickableIncrement);this._visibleIncrementDate=c(this.visibleIncrement);var e=3600*this._clickableIncrementDate.getHours()+60*this._clickableIncrementDate.getMinutes()+
this._clickableIncrementDate.getSeconds(),d=3600*this._visibleIncrementDate.getHours()+60*this._visibleIncrementDate.getMinutes()+this._visibleIncrementDate.getSeconds();(this.value||this.currentFocus).getTime();this._refDate=c("T00:00:00");this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=d/e;this._maxIncrement=86400/e;c=this._getFilteredNodes();a.forEach(c,function(a){this.domNode.appendChild(a)},this);!c.length&&this.filterString&&(this.filterString="",this._showText())},
constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in{clickableIncrement:1,visibleIncrement:1})b in a&&(this[b]=a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var b=new Date(this._refDate),c=this._clickableIncrementDate;b.setHours(b.getHours()+c.getHours()*a,b.getMinutes()+c.getMinutes()*a,b.getSeconds()+c.getSeconds()*a);"time"==this.constraints.selector&&
b.setFullYear(1970,0,1);c=f.format(b,this.constraints);if(this.filterString&&0!==c.toLowerCase().indexOf(this.filterString))return null;var g=this.ownerDocument.createElement("div");g.className=this.baseClass+"Item";g.date=b;g.idx=a;h.create("div",{"class":this.baseClass+"ItemInner",innerHTML:c},g);1>a%this._visibleIncrement&&-1<a%this._visibleIncrement?e.add(g,this.baseClass+"Marker"):a%this._clickableIncrement||e.add(g,this.baseClass+"Tick");this.isDisabledDate(b)&&e.add(g,this.baseClass+"ItemDisabled");
this.value&&!d.compare(this.value,b,this.constraints.selector)&&(g.selected=!0,e.add(g,this.baseClass+"ItemSelected"),this._selectedDiv=g,e.contains(g,this.baseClass+"Marker")?e.add(g,this.baseClass+"MarkerSelected"):e.add(g,this.baseClass+"TickSelected"),this._highlightOption(g,!0));return g},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},_onOptionSelected:function(a){(a=a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a)&&(this._highlighted_option=
null,this.set("value",a),this.onChange(a))},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}e.toggle(a,this.baseClass+"ItemHover",b);e.contains(a,this.baseClass+"Marker")?e.toggle(a,this.baseClass+"MarkerHover",b):e.toggle(a,this.baseClass+"TickHover",b)}},handleKey:function(a){if(a.keyCode==k.DOWN_ARROW)return this.selectNextNode(),
a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==k.UP_ARROW)return this.selectPreviousNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==k.ENTER||a.keyCode===k.TAB){if(!this._keyboardSelected&&a.keyCode===k.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option});return a.keyCode===k.TAB}},onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,
!1)},onClick:function(a){this._onOptionSelected({target:a})}})})},"lh/app/hc_2011/assistanceTypeModule":function(){define(["dojo","dijit","dojox","dojo/require!lh/util/logger"],function(a,d,f){a.provide("lh.app.hc_2011.assistanceTypeModule");a.require("lh.util.logger");a.declare("lh.app.hc_2011.assistanceTypeModule",lh.util.logger,{$ASSISTANCE:a.byId("fb_mod_assistanceType"),hiddenClass:"x-hidden",debug:!1,_initAssistanceTypeModule:function(){this.debugEnter("_initAssistanceTypeModule");(new d.form.RadioButton({value:this.inputValues.radioLongDistances||
"WCHR",id:"at_long_distances_radio",name:"AssistanceType","class":"fb_radio",checked:this.prefilledData.at_radioLongDistances||!1})).placeAt(a.byId("at_LongDistances")).startup();(new d.form.RadioButton({value:this.inputValues.radioStaircases||"WCHS",id:"at_staircases_radio",name:"AssistanceType","class":"fb_radio",checked:this.prefilledData.at_radioStaircases||!1})).placeAt(a.byId("at_Staircases")).startup();(new d.form.RadioButton({value:this.inputValues.radioWalking||"WCHC",id:"at_walking_radio",
name:"AssistanceType","class":"fb_radio",checked:this.prefilledData.at_radioWalking||!1})).placeAt(a.byId("at_Walking")).startup();a.removeClass(this.$ASSISTANCE,this.hiddenClass);a.addClass(this.$ASSISTANCE,"clearfix");this.debugExit()}})})},"lh/app/hc_2011/disabilityTypeModule":function(){define(["dojo","dijit","dojox","dojo/require!lh/util/logger"],function(a,d,f){a.provide("lh.app.hc_2011.disabilityTypeModule");a.require("lh.util.logger");a.declare("lh.app.hc_2011.disabilityTypeModule",lh.util.logger,
{$DISABILITY:a.byId("fb_mod_disabilityType"),hiddenClass:"x-hidden",debug:!1,_initDisabilityTypeModule:function(){this.debugEnter("_initDisabilityTypeModule");(new d.form.CheckBox({value:this.inputValues.chkboxBlind||"BLND",id:"dt_blind_chkbox",name:"Blind","class":"dt_chkbox",checked:this.prefilledData.dt_blind||!1})).placeAt(a.byId("dt_Blind")).startup();(new d.form.CheckBox({value:this.inputValues.chkboxDeaf||"DEAF",id:"dt_deaf_chkbox",name:"Deaf","class":"dt_chkbox",checked:this.prefilledData.dt_deaf||
!1})).placeAt(a.byId("dt_Deaf")).startup();(new d.form.CheckBox({value:this.inputValues.chkboxDpna||"DPNA",id:"dt_dpna_chkbox",name:"Dpna","class":"dt_chkbox",checked:this.prefilledData.dt_dpna||!1})).placeAt(a.byId("dt_Dpna")).startup();a.removeClass(this.$DISABILITY,this.hiddenClass);a.addClass(this.$DISABILITY,"clearfix");this.debugExit()}})})},"lh/app/hc_2011/companionReasonsModule":function(){define(["dojo","dijit","dojox","dojo/require!lh/util/logger"],function(a,d,f){a.provide("lh.app.hc_2011.companionReasonsModule");
a.require("lh.util.logger");a.declare("lh.app.hc_2011.companionReasonsModule",lh.util.logger,{$COMPANION:a.byId("fb_mod_companionReasons"),hiddenClass:"x-hidden",debug:!1,_initCompanionReasonsModule:function(){this.debugEnter("_initCompanionReasonsModule");(new d.form.RadioButton({value:this.inputValues.radioHc||"SVAN",id:"cr_hc_radio",name:"CompanionReasons","class":"fb_radio",checked:this.prefilledData.cr_hc||!1})).placeAt(a.byId("cr_Hc")).startup();(new d.form.RadioButton({value:this.inputValues.radioPr||
"ESAN",id:"cr_pr_radio",name:"CompanionReasons","class":"fb_radio",checked:this.prefilledData.cr_pr||!1})).placeAt(a.byId("cr_Pr")).startup();a.removeClass(this.$COMPANION,this.hiddenClass);a.addClass(this.$COMPANION,"clearfix");this.debugExit()}})})},"pi/VerticalTabModul":function(){require(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(a,d,f){a("pi.VerticalTabModul",[d,f],{_scopeNode:null,constructor:function(a,c){this._scopeNode=dojo.byId(c)},buildRendering:function(a){dojo.query(".pi_verticalTabModulTab, input",
this._scopeNode).forEach(function(a,b,d){b==d.length-1&&dojo.query(a).addClass("last")})},postCreate:function(){var a=this;dojo.query(".pi_verticalTabModulTab",this._scopeNode).connect("onclick",function(c){var e=c.currentTarget,d=0;dojo.query(".pi_verticalTabModulTab",a._scopeNode).forEach(function(a,b,c){a==e&&(d=b)});a.open(d)});this.open(0)},open:function(a){var c=dojo.query(".pi_verticalTabModulTab",this._scopeNode).at(a),e=c.attr("id"),d=dojo.hasClass(c,"selected");dojo.query(".pi_verticalTabModulTabIcon input",
this._scopeNode).attr("checked",!1);dojo.query(".pi_verticalTabModulTab",this._scopeNode).forEach(function(a,b,c){b==c.length-1&&dojo.query(a).addClass("last");dojo.query(a).removeClass("selected")});dojo.query(".pi_verticalTabModulPanel",this._scopeNode).forEach(function(c,e,d){0==e&&dojo.query(c).addClass("first");e==a?dojo.query(c).addClass("opened"):dojo.query(c).removeClass("opened")});d||(c.addClass("selected"),dojo.query("#"+e+" input").attr("checked",!0))}})})},"pi/AccordionModul":function(){require(["dojo/_base/declare",
"dojo/fx","dojo/NodeList-traverse","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(a,d,f,b,c){a("pi.AccordionModul",[b,c],{_scopeNode:null,collapseOthers:!1,constructor:function(a,b){this._scopeNode=dojo.byId(b)},buildRendering:function(){dojo.query(".pi_accordionModulPanel",this._scopeNode).forEach(function(a,b,c){dojo.style(a,"display","none");dojo.fx.wipeOut({node:a,duration:0}).play();dojo.query(a).addClass("accordion-show");b==c.length-1&&dojo.query(a).addClass("last")});dojo.query(".pi_accordionModulHeader",
this._scopeNode).forEach(function(a,b,c){b==c.length-1&&dojo.query(a).addClass("last")})},postCreate:function(){var a=this;dojo.query(".pi_accordionModulHeader",this._scopeNode).connect("onclick",function(b){var c=b.currentTarget,d=dojo.query(c,a._scopeNode),c=dojo.hasClass(c,"open"),f=d.next();a.collapseOthers&&dojo.query(d.parent().children(".pi_accordionModulPanel")).forEach(function(a,b,c){b=dojo.query(a).prev();dojo.hasClass(b[0],"open")&&(dojo.fx.wipeOut({node:a}).play(),b.removeClass("open"))});
c?(dojo.fx.wipeOut({node:f[0].id}).play(),d.removeClass("open")):(dojo.fx.wipeIn({node:f[0].id}).play(),d.addClass("open"));b.preventDefault();b.stopPropagation()})},openPanel:function(a){var b=this;dojo.isArray(a)&&dojo.forEach(a,function(a,c){if(a){var e=dojo.query(".pi_accordionModulHeader",b._scopeNode)[c],d=dojo.query(e).next();dojo.fx.wipeIn({node:d[0].id}).play();dojo.query(e).addClass("open")}})}})})},"lh/app/hc_2011/feedbackFileUploader":function(){define(["dojo","dijit","dojox","dojo/require!dojo/request/iframe"],
function(a,d,f){a.provide("lh.app.hc_2011.feedbackFileUploader");a.require("dojo.request.iframe");lh.topics.feedback={};lh.topics.feedback.NOSUBMIT="noFeedbackSubmit";lh.topics.feedback.DOSUBMIT="doFeedbackSubmit";a.declare("lh.app.hc_2011.feedbackFileUploader",lh.util.logger,{debug:!1,testMode:!1,testWait:2E3,formUploadId:"fup-frm",elementInputFileId:"file",submitUploadLinkId:"fup-submit-lnk",addUploadSectLinkId:"fup-add-sec-lnk",infoTextId:"fup-info-txt",uploadErrorTxtWrpId:"fup-error",sectUploadId:"fup-tbl",
sectAddUploadSectId:"fup-add-sec",sectRemoveTemplateId:"fup-tbl-rm-X",sectInfoTemplateId:"fup-tbl-info",attachNodeId:"fup-attach-node",removeSectionPreFixId:"fup-tbl-rm-",removeErrorTxtWrpPreFixId:"fup-error-rm-",filenameDisplayFieldPreFixId:"fup-file-rm-",inputFileWrpId:"fub-reload",hiddenFileNameFieldIdPrefix:"attach_filename_",hiddenFileIdFieldIdPrefix:"attach_fileid_",xClassHiddenFileName:"x-fup-hd-filename",xClassHiddenFileId:"x-fup-hd-fileid",tempRemoveId:"",arrValidExtensions:["pdf","jpeg",
"jpg"],maxFiles:6,maxFileSize:512E3,fileCounter:0,timeOutSeconds:10,doAddFlag:!1,doRemoveFlag:!0,constructor:function(b){this.debugEnter("constructor");a.mixin(this,b);this.nodeFormUpload=a.byId(this.formUploadId);this.nodeInputFile=a.byId(this.elementInputFileId);this.nodeLinkSubmit=a.byId(this.submitUploadLinkId);this.nodeLinkAddUploadSection=a.byId(this.addUploadSectLinkId);this.nodeInfoText=a.byId(this.infoTextId);this.nodeErrorTxt=a.byId(this.uploadErrorTxtWrpId);this.nodeUploadSection=a.byId(this.sectUploadId);
this.nodeAddUploadSection=a.byId(this.sectAddUploadSectId);this.nodeAttachRoot=a.byId(this.attachNodeId);this.nodeRemoveSection=a.byId(this.sectRemoveTemplateId);this.nodeInfoSection=a.byId(this.sectInfoTemplateId);this.nodeInputFileWrp=a.byId(this.inputFileWrpId);a.connect(this.nodeLinkSubmit,"onclick",this,"fileupload");a.connect(this.nodeLinkAddUploadSection,"onclick",this,"showUploadSection");this.templateUpload=this.nodeUploadSection;this.templateRemove=this.nodeRemoveSection;this.templateInfo=
this.nodeInfoSection;a.style(this.templateRemove,{display:"block"});a.style(this.templateInfo,{display:"block"});this.nodeRemoveSection.parentNode.removeChild(this.nodeRemoveSection);this.nodeInfoSection.parentNode.removeChild(this.nodeInfoSection);a.subscribe(lh.topics.feedback.NOSUBMIT,this,"disableAddLink");a.subscribe(lh.topics.feedback.DOSUBMIT,this,"enableAddLink");a.subscribe(lh.topics.feedback.NOSUBMIT,this,"disableRemoveLink");a.subscribe(lh.topics.feedback.DOSUBMIT,this,"enableRemoveLink");
this.arrHiddenFileId=a.query("."+this.xClassHiddenFileId);this.arrHiddenFileName=a.query("."+this.xClassHiddenFileName);this.arrHiddenInfoFields=[];a.forEach(this.arrHiddenFileId,a.hitch(this,function(b,e,d){e={};d=b.id.split(this.hiddenFileIdFieldIdPrefix);e.id=d[1];e.fileIdElement=b;e.fileIdValue="";e.fileNameElement=a.byId(this.hiddenFileNameFieldIdPrefix+d[1]);""!=b.value&&""!=e.fileNameElement.value&&(e.fileIdValue=b.value,this.showRemoveSection(e.fileIdValue),a.byId(this.filenameDisplayFieldPreFixId+
e.fileIdValue).value=e.fileNameElement.value,this.fileCounter++);this.arrHiddenInfoFields.push(e)}));0<this.fileCounter&&this.hideUploadSection();this.fileCounter<this.maxFiles&&this.showAddUploadSection();a.connect(a.byId("file"),"onchange",function(){var b=a.byId("file").value.split("\\");a.byId("fileTrigger").value=b[b.length-1]});a.isIE?(a.addClass(a.byId("labelFileButton"),"ieMode"),a.addClass(a.byId("file"),"ieMode"),a.create("span",{"class":"fb_uploadIE",innerHTML:""},a.byId("labelFileButton"),
"first"),a.connect(a.byId("fileButton"),"onclick",function(a){a&&a.preventDefault()})):(4>a.isFF&&a.addClass(a.byId("file"),"inputFile_ff3_6_Mode"),a.connect(a.byId("fileButton"),"onclick",function(b){b&&(b.preventDefault(),a.byId("file").click())}),a.connect(a.byId("fileTrigger"),"onclick",function(b){b&&(b.preventDefault(),a.byId("file").click())}));this.debugExit()},fileupload:function(b){this.debugEnter("fileupload");""!=this.nodeInputFile.value?this._isFileSizeValid(this.nodeInputFile)?this._isExtensionValid(this.nodeInputFile.value)?
(this.showInfoSection(this.textWaitWhileUploading,this.templateUpload),a.publish(lh.topics.feedback.NOSUBMIT),a.request.iframe.post(this.urlUpload,{form:this.nodeFormUpload,content:{fnx:this.fileCounter+1},handleAs:"json"}).then(a.hitch(this,function(a,b){this.testMode?this.testSuccessUpload(a,b):this.handleSuccessUpload(a,b)}),a.hitch(this,function(a,b){this.testMode?this.testFailureUpload(a,b):this.handleFailureUpload(a,b)}))):this.showFailureUploadMsg(this._getErrorText(this.extensionErrorCode)):
this.showFailureUploadMsg(this._getErrorText(this.fileSizeErrorCode)):this.showFailureUploadMsg(this._getErrorText(this.emptyFileUploadCode));a.stopEvent(b);this.debugExit()},testSuccessUpload:function(b,c){setTimeout(a.hitch(this,"handleSuccessUpload",b,c),this.testWait)},testFailureUpload:function(b,c){setTimeout(a.hitch(this,"handleFailureUpload",b,c),this.testWait)},handleSuccessUpload:function(b,c){this.debugEnter("handleSuccessUpload");a.publish(lh.topics.feedback.DOSUBMIT);"success"==b.result?
(this.hideInfoSection(this.templateUpload),this.fileCounter++,this.hideUploadSection(),this.showRemoveSection(b.id),this.fileCounter<this.maxFiles&&this.showAddUploadSection(),this.updateMainForm("upload",b.id,this._getFileName(this.nodeInputFile.value))):"error"==b.result&&(a.publish(lh.topics.feedback.DOSUBMIT),this.hideInfoSection(this.templateUpload),this.showFailureUploadMsg(this._getErrorText(b.code)));this.debugExit()},handleFailureUpload:function(b,c){this.debugEnter("handleFailureUpload");
a.publish(lh.topics.feedback.DOSUBMIT);this.hideInfoSection(this.templateUpload);this.showFailureUploadMsg(this._getErrorText(""));this.debugExit()},removeUpload:function(b){this.debugEnter("removeUpload");if(this.doRemoveFlag&&""!=b.target.id){var c=b.target.id,c=c.split("-"),c=c[c.length-1];this.showInfoSection(this.textWaitWhileRemoving,a.byId(this.removeSectionPreFixId+c));a.publish(lh.topics.feedback.NOSUBMIT);this.tempRemoveId=c;a.request.iframe.post(this.urlRemove,{data:{id:c},handleAs:"json"}).then(a.hitch(this,
function(a,b){this.testMode?this.testSuccessRemove(a,b):this.handleSuccessRemove(a,b)}),a.hitch(this,function(a,b){this.testMode?this.testFailureRemove(a,b):this.handleFailureRemove(a,b)}))}a.stopEvent(b);this.debugExit()},removeUploadFF3_6:function(b){this.debugEnter("removeUpload_FF3.6");this.doRemoveFlag&&""!=b.id&&(b=b.id,b=b.split("-"),b=b[b.length-1],this.showInfoSection(this.textWaitWhileRemoving,a.byId(this.removeSectionPreFixId+b)),a.publish(lh.topics.feedback.NOSUBMIT),this.tempRemoveId=
b,a.request.iframe.post(this.urlRemove,{content:{id:b,action:"remove"},handleAs:"json"}).then(a.hitch(this,function(a,b){this.testMode?this.testSuccessRemove(a,b):this.handleSuccessRemove(a,b)}),a.hitch(this,function(a,b){this.testMode?this.testFailureRemove(a,b):this.handleFailureRemove(a,b)})));a.stopEvent(event);this.debugExit()},testSuccessRemove:function(b,c){setTimeout(a.hitch(this,"handleSuccessRemove",b,c),this.testWait)},testFailureRemove:function(b,c){setTimeout(a.hitch(this,"handleFailureRemove",
b,c),this.testWait)},handleSuccessRemove:function(b,c){this.debugEnter("handleSuccessRemove");a.publish(lh.topics.feedback.DOSUBMIT);this.tempRemoveId="";"success"==b.result?(this.hideInfoSection(a.byId(this.removeSectionPreFixId+b.id)),this.nodeAttachRoot.removeChild(a.byId(this.removeSectionPreFixId+b.id)),this.fileCounter--,0==this.fileCounter?(this.hideAddUploadSection(),this.showUploadSection()):this.fileCounter<this.maxFiles&&this.showAddUploadSection(),this.updateMainForm("remove",b.id,"")):
"error"==b.result&&(a.publish(lh.topics.feedback.DOSUBMIT),this.hideInfoSection(a.byId(this.removeSectionPreFixId+b.id)),this.showFailureRemoveMsg(this._getErrorText(b.code),b.id));this.debugExit()},handleFailureRemove:function(b,c){this.debugEnter("handleFailureRemove");a.publish(lh.topics.feedback.DOSUBMIT);this.hideInfoSection(a.byId(this.removeSectionPreFixId+this.tempRemoveId));this.showFailureRemoveMsg(this._getErrorText(b.code),this.tempRemoveId);this.tempRemoveId="";this.debugExit()},showRemoveSection:function(b){this.debugEnter("showRemoveSection");
this.nodeAttachRoot.appendChild(a.clone(this.templateRemove));a.query("*",this.nodeAttachRoot).forEach(a.hitch(this,function(c,d,h){if(""!=c.id&&-1<c.id.indexOf("-X")){d=c.id.split("-");var g="";a.forEach(d,function(a,c,d){g="X"!=a?g+a+"-":g+b});c.id=g;"a"==c.tagName.toLowerCase()&&(a.connect(c,"onclick",this,"removeUpload"),a.connect(c.children[0],"onclick",this,function(b){4>a.isFF?this.removeUploadFF3_6(c):c.click();b&&a.stopEvent(b)}));"input"==c.tagName.toLowerCase()&&(c.value=this._getFileName(this.nodeInputFile.value))}}));
this.debugExit()},showFailureRemoveMsg:function(b,c){this.debugEnter("showFailureRemoveMsg");a.byId(this.removeErrorTxtWrpPreFixId+c).innerHTML=b;this.debugExit()},showFailureUploadMsg:function(a){this.debugEnter("showFailureUploadMsg");this.nodeErrorTxt.innerHTML=a;this.debugExit()},hideUploadSection:function(){this.debugEnter("hideUploadSection");this.nodeAttachRoot.removeChild(this.templateUpload);this.debugExit()},showUploadSection:function(b){this.debugEnter("showUploadSection");if(this.doAddFlag){this.nodeAttachRoot.appendChild(this.templateUpload);
a.style(this.templateUpload,{display:"block"});this.nodeErrorTxt.innerHTML="";var c=this.nodeInputFile.id,c=a.create("input",{type:"file",id:c,name:c,"class":"fb_uploadfile"},this.nodeInputFile,"replace");a.isIE&&a.addClass(a.byId("file"),"ieMode");4>a.isFF&&a.addClass(a.byId("file"),"inputFile_ff3_6_Mode");null!=a.byId("fileTrigger")&&(a.byId("fileTrigger").value="");this.nodeInputFile=c;a.connect(this.nodeInputFile,"onchange",function(){var b=a.byId("file").value.split("\\");a.byId("fileTrigger").value=
b[b.length-1]});this.hideAddUploadSection()}b&&a.stopEvent(b);this.debugExit()},showAddUploadSection:function(){this.debugEnter("showAddUploadSection");a.style(this.nodeAddUploadSection,{display:"block"});this.debugExit()},hideAddUploadSection:function(){this.debugEnter("hideAddUploadSection");a.style(this.nodeAddUploadSection,{display:"none"});this.debugExit()},showInfoSection:function(b,c){this.debugEnter("showInfoSection");this.nodeAttachRoot.insertBefore(this.templateInfo,c);this.nodeInfoText.innerHTML=
b;a.style(c,{display:"none"});this.debugExit()},hideInfoSection:function(b){this.debugEnter("hideInfoSection");this.nodeAttachRoot.removeChild(this.templateInfo);a.style(b,{display:"block"});this.debugExit()},disableAddLink:function(){this.debugEnter("disableAddLink");this.doAddFlag=!1;a.addClass(this.nodeLinkAddUploadSection,"inactive");this.debugExit()},enableAddLink:function(){this.debugEnter("enableAddLink");this.doAddFlag=!0;a.removeClass(this.nodeLinkAddUploadSection,"inactive");this.debugExit()},
disableRemoveLink:function(){this.debugEnter("disableRemoveLink");this.doRemoveFlag=!1;a.query(".x-remove-lnk",this.nodeAttachRoot).forEach(function(b,c,d){a.addClass(b,"lnk-btn-fb-disabled")});this.debugExit()},enableRemoveLink:function(){this.debugEnter("enableRemoveLink");this.doRemoveFlag=!0;a.query(".x-remove-lnk",this.nodeAttachRoot).forEach(function(b,c,d){a.removeClass(b,"lnk-btn-fb-disabled")});this.debugExit()},updateMainForm:function(b,c,d){this.debugEnter("updateMainForm");if("upload"==
b){var h=!1;a.forEach(this.arrHiddenInfoFields,a.hitch(this,function(a,b,f){h||""!=a.fileIdValue||""!=a.fileIdElement.value||(a.fileIdValue=a.fileIdElement.value=c,a.fileNameElement.value=d,h=!0)}))}else"remove"==b&&(h=!1,a.forEach(this.arrHiddenInfoFields,a.hitch(this,function(a,b,d){h||a.fileIdValue!=c||(a.fileIdValue=a.fileIdElement.value="",a.fileNameElement.value="",h=!0)})));this.debugExit()},_isExtensionValid:function(b){this.debugEnter("_isExtensionValid");var c=!1,d=this._getFileName(b).split(".");
a.forEach(this.arrValidExtensions,function(a,b,f){d[d.length-1].toLowerCase()==a&&(c=!0)});this.debugExit();return c},_isFileSizeValid:function(a){this.debugEnter("_isFileSizeValid");var c=!1;window.File&&window.FileReader&&window.FileList&&window.Blob?(a=a.files[0])&&a.size<=this.maxFileSize&&(c=!0):c=!0;this.debugExit();return c},_getFileName:function(a){this.debugEnter("_getFileName");-1<a.indexOf("/")?a=a.substring(a.lastIndexOf("/")+1,a.length):-1<a.indexOf("\\")&&(a=a.substring(a.lastIndexOf("\\")+
1,a.length));this.debugExit();return a},_getErrorText:function(b){this.debugEnter("_getErrorText");var c="";a.forEach(this.arrErrors,function(a,d,g){a.code==b&&(c=a.txt)});""==c&&a.forEach(this.arrErrors,function(a,b,d){""==a.code&&(c=a.txt)});this.debugExit();return c}});a.declare("lh.app.feedbackFileUploader",lh.app.hc_2011.feedbackFileUploader,null)})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),
function(a,d,f,b,c,e,h,g,k,p,m,n){function q(a){return!this.isFulfilled()}function t(a){return!!this._finished}function s(a,b){if(!b)try{var d=a.options,f=l.doc(l._frame),h=d.handleAs;if("html"!==h){if("xml"===h)if("html"===f.documentElement.tagName.toLowerCase()){g("a",f.documentElement).orphan();var k=f.documentElement.innerText,k=k.replace(/>\s+</g,"\x3e\x3c");a.text=e.trim(k)}else a.data=f;else a.text=f.getElementsByTagName("textarea")[0].value;c(a)}else a.data=f}catch(m){b=m}b?this.reject(b):
this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function r(a){this._callNext()}function l(a,c,d){var e=b.parseArgs(a,b.deepCreate(A,c),!0);a=e.url;c=e.options;if("GET"!==c.method&&"POST"!==c.method)throw Error(c.method+" not supported by dojo/request/iframe");l._frame||(l._frame=l.create(l._iframeName,w+"();"));a=b.deferred(e,null,q,t,s,r);a._callNext=function(){this._calledNext||(this._calledNext=!0,l._currentDfd=null,l._fireNextRequest())};a._legacy=
d;l._dfdQueue.push(a);l._fireNextRequest();f(a);return d?a:a.promise}var x=a.id.replace(/[\/\.\-]/g,"_"),w=x+"_onload";n.global[w]||(n.global[w]=function(){var a=l._currentDfd;if(a){var b=p.byId(a.response.options.form)||a._tmpForm;if(b){for(var c=a._contentToClean,d=0;d<c.length;d++)for(var e=c[d],g=0;g<b.childNodes.length;g++){var f=b.childNodes[g];if(f.name===e){m.destroy(f);break}}a._originalAction&&b.setAttribute("action",a._originalAction);a._originalMethod&&(b.setAttribute("method",a._originalMethod),
b.method=a._originalMethod);a._originalTarget&&(b.setAttribute("target",a._originalTarget),b.target=a._originalTarget)}a._tmpForm&&(m.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else l._fireNextRequest()});var A={method:"POST"};l.create=function(a,b,c){if(n.global[a])return n.global[a];if(n.global.frames[a])return n.global.frames[a];c||(k("config-useXDomain")&&k("config-dojoBlankHtmlUrl"),c=k("config-dojoBlankHtmlUrl")||d.toUrl("dojo/resources/blank.html"));b=m.place('\x3ciframe id\x3d"'+
a+'" name\x3d"'+a+'" src\x3d"'+c+'" onload\x3d"'+b+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',n.body());return n.global[a]=b};l.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=n.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(n.doc.frames[b]&&n.doc.frames[b].document)return n.doc.frames[b].document}return null};
l.setSrc=function(a,b,c){a=n.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{c?a.location.replace(b):a.location=b}catch(d){}};l._iframeName=x+"_IoIframe";l._notifyStart=function(){};l._dfdQueue=[];l._currentDfd=null;l._fireNextRequest=function(){var a;try{if(!l._currentDfd&&l._dfdQueue.length){do a=l._currentDfd=l._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&l._dfdQueue.length);if(!a||a.canceled||a.isCanceled&&a.isCanceled())l._currentDfd=null;else{var c=a.response,
d=c.options,g=a._contentToClean=[],f=p.byId(d.form),k=b.notify,r=d.data||null,q;a._legacy||"POST"!==d.method||f?"GET"===d.method&&f&&-1<c.url.indexOf("?")&&(q=c.url.slice(c.url.indexOf("?")+1),r=e.mixin(h.queryToObject(q),r)):f=a._tmpForm=m.create("form",{name:x+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},n.body());if(f){if(!a._legacy){var u=f;do u=u.parentNode;while(u&&u!==n.doc.documentElement);u||(f.style.position="absolute",f.style.left="-1000px",f.style.top="-1000px",n.body().appendChild(f));
f.name||(f.name=x+"_form")}if(r){var u=function(a,b){m.create("input",{type:"hidden",name:a,value:b},f);g.push(a)},s;for(s in r){var t=r[s];if(e.isArray(t)&&1<t.length)for(q=0;q<t.length;q++)u(s,t[q]);else f[s]?f[s].value=t:u(s,t)}}var y=f.getAttributeNode("action"),v=f.getAttributeNode("method"),z=f.getAttributeNode("target");c.url&&(a._originalAction=y?y.value:null,y?y.value=c.url:f.setAttribute("action",c.url));a._legacy?v&&v.value||(v?v.value=d.method:f.setAttribute("method",d.method)):(a._originalMethod=
v?v.value:null,v?v.value=d.method:f.setAttribute("method",d.method));a._originalTarget=z?z.value:null;z?z.value=l._iframeName:f.setAttribute("target",l._iframeName);f.target=l._iframeName;k&&k.emit("send",c,a.promise.cancel);l._notifyStart(c);f.submit()}else d="",c.options.data&&(d=c.options.data,"string"!==typeof d&&(d=h.objectToQuery(d))),u=c.url+(-1<c.url.indexOf("?")?"\x26":"?")+d,k&&k.emit("send",c,a.promise.cancel),l._notifyStart(c),l.setSrc(l._frame,u,!0)}}}catch(w){a.reject(w)}};b.addCommonMethods(l,
["GET","POST"]);return l})},"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cinput\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point\x3d"focusNode"\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\n/\x3e\x3c/div\x3e\n',"url:dijit/templates/Calendar.html":'\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"dijitCalendarContainer" role\x3d"grid" aria-labelledby\x3d"${id}_mddb ${id}_year" data-dojo-attach-point\x3d"gridNode"\x3e\n\t\x3cthead\x3e\n\t\t\x3ctr class\x3d"dijitReset dijitCalendarMonthContainer" valign\x3d"top"\x3e\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' data-dojo-attach-point\x3d"decrementMonth" scope\x3d"col"\x3e\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\n\t\t\t\x3c/th\x3e\n\t\t\t\x3cth class\x3d\'dijitReset\' colspan\x3d"5" scope\x3d"col"\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode"\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/th\x3e\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' scope\x3d"col" data-dojo-attach-point\x3d"incrementMonth"\x3e\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\n\t\t\t\x3c/th\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3ctr role\x3d"row"\x3e\n\t\t\t${!dayCellsHtml}\n\t\t\x3c/tr\x3e\n\t\x3c/thead\x3e\n\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\n\t\t\t${!dateRowsHtml}\n\t\x3c/tbody\x3e\n\t\x3ctfoot class\x3d"dijitReset dijitCalendarYearContainer"\x3e\n\t\t\x3ctr\x3e\n\t\t\t\x3ctd class\x3d\'dijitReset\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\n\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\x3c/tfoot\x3e\n\x3c/table\x3e\n'}});
define("lh/app/app_helpAndContact_2012",["dojo","dijit","dojox","dojo/require!dijit/form/Form,dijit/form/RadioButton,dijit/form/CheckBox,dijit/form/ValidationTextBox,dijit/form/DateTextBox,dijit/form/SimpleTextarea,lh/validation,lh/lh_formBuilder,pi/VerticalTabModul,pi/AccordionModul,lh/app/hc_2011/feedbackFileUploader"],function(a,d,f){a.provide("lh.app.app_helpAndContact_2012");a.require("dijit.form.Form");a.require("dijit.form.RadioButton");a.require("dijit.form.CheckBox");a.require("dijit.form.ValidationTextBox");
a.require("dijit.form.DateTextBox");a.require("dijit.form.SimpleTextarea");a.require("lh.validation");a.require("lh.lh_formBuilder");a.require("pi.VerticalTabModul");a.require("pi.AccordionModul");a.require("lh.app.hc_2011.feedbackFileUploader")});
//# sourceMappingURL=app_helpAndContact_2012.js.map